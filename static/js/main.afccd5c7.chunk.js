(this["webpackJsonpserverless-project"]=this["webpackJsonpserverless-project"]||[]).push([[0],{80:function(e,a,t){e.exports=t(94)},85:function(e,a,t){},94:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(9),i=t.n(c),s=(t(85),t(67)),o=t(23),l=t(134),m=t(129),u=t(131),d=t(132),b=t(66),E=t(130),p=t(133),g=t(58),f=t.n(g),y=t(51),A=t.n(y),R=t(127),h=t(65),w=t.n(h),k=t(10),q=t(14),v=t(128),S=t(64),x=t.n(S),D=Object(E.a)({button:{borderRadius:5,color:"#FFF",backgroundColor:"#fd5750","&:hover":{backgroundColor:"#FD8984"}}});function N(e){var a=e.values,t=e.resourceName,n=e.arrayName,c=e.resourceAddLabel,i=D();return r.a.createElement(r.a.Fragment,null,a[t]?r.a.createElement(k.b,{name:n,render:function(e){return r.a.createElement(r.a.Fragment,null,a[n]&&a[n].length>0?r.a.createElement(r.a.Fragment,null,a[n].map((function(a,t){return r.a.createElement("div",{key:t},r.a.createElement(u.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1},r.a.createElement(u.a,{item:!0,xs:9},r.a.createElement(k.a,{component:q.b,name:"".concat(n,".").concat(t),fullWidth:!0})),r.a.createElement(u.a,{item:!0,xs:3},r.a.createElement(v.a,{className:i.button,component:"span",size:"small",onClick:function(){return e.remove(t)}},r.a.createElement(x.a,null)))))})),r.a.createElement(l.a,{m:1},r.a.createElement(d.a,{className:i.button,onClick:function(){return e.insert(a[n].length,"")},size:"small"},c))):r.a.createElement(d.a,{className:i.button,onClick:function(){return e.push("")},size:"small"},c))}}):null)}var P=function(e){var a={};return e.projectName||(a.projectName="Required"),e.accountId?/^[0-9\b]+$/.test(e.accountId)||(a.accountId="Invalid ID"):a.accountId="Required",e.region||(a.region="Required"),e.stage||(a.stage="Required"),!0===e.isS3Required&&0===e.s3Array.length&&(a.isS3Required=" Please add a bucket"),!0===e.isDynamoDbRequired&&0===e.dynamoDbArray.length&&(a.isDynamoDbRequired=" Please add a database"),!0===e.isSqsRequired&&0===e.sqsArray.length&&(a.isSqsRequired=" Please add a queue"),!0===e.isAlbRequired&&0===e.albArray.length&&(a.isAlbRequired=" Please add a listner"),!0===e.isKinesisRequired&&0===e.kinesisArray.length&&(a.isKinesisRequired=" Please add a stream"),!0===e.isSnsRequired&&0===e.snsArray.length&&(a.isSnsRequired=" Please add a topic"),a},j=function(e,a,t){return{Effect:"Allow",Action:["sns:*"],Resource:e.map((function(e){return"arn:aws:sns:".concat(a,":").concat(t,":").concat(e)}))}},I=function(e){var a,t,n,r,c,i,s=e.projectName,o=e.accountId,l=e.stage,m=e.region,u=e.isS3Required,d=e.s3Array,b=e.isSnsRequired,E=e.snsArray,p=e.isApiGWRequired,g=e.isSgRequired,f=e.isAlbRequired,y=e.albArray,A=e.isSqsRequired,R=e.sqsArray,h=e.isKinesisRequired,w=e.kinesisArray,k=e.isDynamoDbRequired,q=e.dynamoDbArray;return{Version:"2012-10-17",Statement:[{Effect:"Allow",Action:["cloudformation:List*","cloudformation:Get*","cloudformation:ValidateTemplate"],Resource:["*"]},{Effect:"Allow",Action:["cloudformation:CreateStack","cloudformation:CreateUploadBucket","cloudformation:DeleteStack","cloudformation:Describe*","cloudformation:UpdateStack"],Resource:["arn:aws:cloudformation:".concat(m,":").concat(o,":stack/").concat(s,"-").concat(l,"/*")]},{Effect:"Allow",Action:["lambda:Get*","lambda:List*","lambda:CreateFunction"],Resource:["*"]},{Effect:"Allow",Action:["s3:GetBucketLocation","s3:CreateBucket","s3:DeleteBucket","s3:ListBucket","s3:GetBucketPolicy","s3:PutBucketPolicy","s3:ListBucketVersions","s3:PutAccelerateConfiguration","s3:GetEncryptionConfiguration","s3:PutEncryptionConfiguration"],Resource:["arn:aws:s3:::".concat(s,"*serverlessdeploy*")]},{Effect:"Allow",Action:["s3:PutObject","s3:GetObject","s3:DeleteObject"],Resource:["arn:aws:s3:::".concat(s,"*serverlessdeploy*")]},{Effect:"Allow",Action:["lambda:AddPermission","lambda:CreateAlias","lambda:DeleteFunction","lambda:InvokeFunction","lambda:PublishVersion","lambda:RemovePermission","lambda:Update*"],Resource:["arn:aws:lambda:".concat(m,":").concat(o,":function:").concat(s,"-").concat(l,"-*")]},{Effect:"Allow",Action:["cloudwatch:GetMetricStatistics"],Resource:["*"]},{Action:["logs:CreateLogGroup","logs:CreateLogStream","logs:DeleteLogGroup"],Resource:["arn:aws:logs:".concat(m,":").concat(o,":*")],Effect:"Allow"},{Action:["logs:PutLogEvents"],Resource:["arn:aws:logs:".concat(m,":").concat(o,":*")],Effect:"Allow"},{Effect:"Allow",Action:["logs:DescribeLogStreams","logs:DescribeLogGroups","logs:FilterLogEvents"],Resource:["*"]},{Effect:"Allow",Action:["events:Put*","events:Remove*","events:Delete*"],Resource:["arn:aws:events:".concat(m,":").concat(o,":rule/").concat(s,"-").concat(l,"-").concat(m)]},{Effect:"Allow",Action:["events:DescribeRule"],Resource:["arn:aws:events:".concat(m,":").concat(o,":rule/").concat(s,"-").concat(l,"-*")]},{Effect:"Allow",Action:["iam:PassRole"],Resource:["arn:aws:iam::".concat(o,":role/*")]},{Effect:"Allow",Action:["iam:GetRole","iam:CreateRole","iam:PutRolePolicy","iam:DeleteRolePolicy","iam:DeleteRole"],Resource:["arn:aws:iam::".concat(o,":role/").concat(s,"-").concat(l,"-").concat(m,"-lambdaRole")]},u&&(i=d,{Effect:"Allow",Action:["s3:GetBucketLocation","s3:CreateBucket","s3:DeleteBucket","s3:ListBucket","s3:GetBucketPolicy","s3:PutBucketPolicy","s3:ListBucketVersions","s3:PutAccelerateConfiguration","s3:GetEncryptionConfiguration","s3:PutEncryptionConfiguration"],Resource:i.map((function(e){return"arn:aws:s3:::".concat(e)}))}),b&&j(E,m,o),p&&{Effect:"Allow",Action:["apigateway:GET","apigateway:POST","apigateway:PUT","apigateway:DELETE","apigateway:PATCH"],Resource:["arn:aws:apigateway:*::/apis*","arn:aws:apigateway:*::/restapis*","arn:aws:apigateway:*::/apikeys*","arn:aws:apigateway:*::/usageplans*"]},g&&{Effect:"Allow",Action:["ec2:AuthorizeSecurityGroupEgress","ec2:AuthorizeSecurityGroupIngress","ec2:CreateSecurityGroup","ec2:DeleteSecurityGroup","ec2:DescribeSecurityGroups","ec2:DescribeNetworkInterfaces","ec2:DescribeSubnets","ec2:DescribeVpcs","ec2:DescribeDhcpOptions","ec2:RevokeSecurityGroupEgress","ec2:RevokeSecurityGroupIngress","ec2:CreateNetworkInterfacePermission","ec2:CreateNetworkInterface","ec2:DeleteNetworkInterfacePermission","ec2:DeleteNetworkInterface","ec2:createTags","ec2:deleteTags"],Resource:["*"]},f&&(c=y,{Effect:"Allow",Action:["elasticloadbalancing:RegisterTargets","elasticloadbalancing:DescribeRules","elasticloadbalancing:DeleteRule","elasticloadbalancing:CreateTargetGroup","elasticloadbalancing:ModifyTargetGroup","elasticloadbalancing:ModifyTargetGroupAttributes","elasticloadbalancing:ModifyRule","elasticloadbalancing:ModifyListener","elasticloadbalancing:AddTags","elasticloadbalancing:DeleteTargetGroup","elasticloadbalancing:DescribeTargetGroups","elasticloadbalancing:DescribeTargetHealth","elasticloadbalancing:CreateRule"],Resources:c.map((function(e){return"".concat(e)}))}),A&&(r=R,{Effect:"Allow",Action:"sqs:*",Resource:r.map((function(e){return"arn:aws:sqs:*:".concat(e)}))}),h&&(n=w,{Effect:"Allow",Action:"kinesis:*",Resource:n.map((function(e){return"arn:aws:kinesis:*:*:stream/".concat(e)}))}),k&&(a=q,t=o,{Effect:"Allow",Action:["dynamodb:*"],Resource:a.map((function(e){return"arn:aws:dynamodb:*:".concat(t,":table/").concat(e)}))})].filter((function(e){return e}))}},C=Object(E.a)({subheading:{color:"#fd5750",fontWeight:"800"},button:{borderRadius:5,color:"#FFF",backgroundColor:"#fd5750","&:hover":{backgroundColor:"#FD8984"}},fieldTitle:{textAlign:"right",fontWeight:"600"},fieldTitle2:{fontWeight:"600"},helperText:{color:"#f02e2e"}});function T(e){var a=e.setPolicy,t=C();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.d,{initialValues:{projectName:"",accountId:"",stage:"",region:"",isS3Required:!1,isSnsRequired:!1,isSqsRequired:!1,isApiGWRequired:!1,isSgRequired:!1,isKinesisRequired:!1,isAlbRequired:!1,isDynamoDbRequired:!1,s3Array:[],dynamoDbArray:[],sqsArray:[],albArray:[],kinesisArray:[],snsArray:[]},validate:P,onSubmit:function(e,t){(0,t.setSubmitting)(!1),a(I(e))}},(function(e){var a=e.submitForm,n=e.isSubmitting,c=e.values,i=e.errors;return r.a.createElement(k.c,null,r.a.createElement(l.a,{m:2},r.a.createElement(m.a,{variant:"h6",component:"h2",className:t.subheading},"Project Meta Data"),r.a.createElement(u.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1},r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(m.a,{variant:"subtitle1",className:t.fieldTitle},"Serverless Project Name")),r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(k.a,{component:q.b,fullWidth:!0,name:"projectName",InputLabelProps:{shrink:!1}}))),r.a.createElement(u.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1},r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(m.a,{variant:"subtitle1",className:t.fieldTitle},"AWS Account ID")),r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(k.a,{component:q.b,name:"accountId",InputLabelProps:{shrink:!1},fullWidth:!0}))),r.a.createElement(u.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1},r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(m.a,{variant:"subtitle1",className:t.fieldTitle},"AWS Region")),r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(k.a,{component:q.b,name:"region",InputLabelProps:{shrink:!1},fullWidth:!0}))),r.a.createElement(u.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1},r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(m.a,{variant:"subtitle1",className:t.fieldTitle},"Application Stage")),r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(k.a,{component:q.b,name:"stage",InputLabelProps:{shrink:!1},fullWidth:!0})))),r.a.createElement(l.a,{m:2},r.a.createElement(m.a,{variant:"h6",component:"h2",className:t.subheading},"Project Permission"),r.a.createElement(u.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1},r.a.createElement(u.a,{item:!0,xs:8},r.a.createElement(m.a,{variant:"subtitle1",className:t.fieldTitle},"Amazon API Gateway")),r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(k.a,{component:q.a,type:"checkbox",name:"isApiGWRequired",inputProps:{"aria-label":"security checkbox"}}))),r.a.createElement(u.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1},r.a.createElement(u.a,{item:!0,xs:8},r.a.createElement(m.a,{variant:"subtitle1",className:t.fieldTitle},"EC2 (Elastic Compute Cloud) Security Groups")),r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(k.a,{component:q.a,type:"checkbox",name:"isSgRequired",inputProps:{"aria-label":"security checkbox"}}))),r.a.createElement(u.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1},r.a.createElement(u.a,{item:!0,xs:8},r.a.createElement(m.a,{variant:"subtitle1",className:t.fieldTitle},"S3 (Simple Static Storage)")),r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(k.a,{component:q.a,type:"checkbox",name:"isS3Required",inputProps:{"aria-label":"s3 checkbox"}})),r.a.createElement(u.a,{item:!0,xs:12},r.a.createElement(N,{values:c,resourceName:"isS3Required",arrayName:"s3Array",resourceAddLabel:"add bucket"})),r.a.createElement(u.a,{item:!0,xs:12},i.isS3Required&&r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{className:t.helperText},i.isS3Required)))),r.a.createElement(u.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1},r.a.createElement(u.a,{item:!0,xs:8},r.a.createElement(m.a,{variant:"subtitle1",className:t.fieldTitle},"DynamoDB")),r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(k.a,{component:q.a,type:"checkbox",name:"isDynamoDbRequired",inputProps:{"aria-label":"dynamoDB checkbox"}})),r.a.createElement(u.a,{item:!0,xs:12},r.a.createElement(N,{values:c,resourceName:"isDynamoDbRequired",arrayName:"dynamoDbArray",resourceAddLabel:"add db"})),r.a.createElement(u.a,{item:!0,xs:12},i.isDynamoDbRequired&&r.a.createElement(R.a,{className:t.helperText},i.isDynamoDbRequired))),r.a.createElement(u.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1},r.a.createElement(u.a,{item:!0,xs:8},r.a.createElement(m.a,{variant:"subtitle1",className:t.fieldTitle},"SNS (Simple Notification Service)")),r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(k.a,{component:q.a,type:"checkbox",name:"isSnsRequired",inputProps:{"aria-label":"sns checkbox"}})),r.a.createElement(u.a,{item:!0,xs:12},r.a.createElement(N,{values:c,resourceName:"isSnsRequired",arrayName:"snsArray",resourceAddLabel:"add topic"})),r.a.createElement(u.a,{item:!0,xs:12},i.isSnsRequired&&r.a.createElement(R.a,{className:t.helperText},i.isSnsRequired))),r.a.createElement(u.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1},r.a.createElement(u.a,{item:!0,xs:8},r.a.createElement(m.a,{variant:"subtitle1",className:t.fieldTitle},"ALB (Application Load Balancer)")),r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(k.a,{component:q.a,type:"checkbox",name:"isAlbRequired",inputProps:{"aria-label":"alb checkbox"}})),r.a.createElement(u.a,{item:!0,xs:12},r.a.createElement(N,{values:c,resourceName:"isAlbRequired",arrayName:"albArray",resourceAddLabel:"add listener"})),r.a.createElement(u.a,{item:!0,xs:12},i.isAlbRequired&&r.a.createElement(R.a,{className:t.helperText},i.isAlbRequired))),r.a.createElement(u.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1},r.a.createElement(u.a,{item:!0,xs:8},r.a.createElement(m.a,{variant:"subtitle1",className:t.fieldTitle},"Amazon Kinesis")),r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(k.a,{component:q.a,type:"checkbox",name:"isKinesisRequired",inputProps:{"aria-label":"security checkbox"}})),r.a.createElement(u.a,{item:!0,xs:12},r.a.createElement(N,{values:c,resourceName:"isKinesisRequired",arrayName:"kinesisArray",resourceAddLabel:"add stream"})),r.a.createElement(u.a,{item:!0,xs:12},i.isKinesisRequired&&r.a.createElement(R.a,{className:t.helperText},i.isKinesisRequired))),r.a.createElement(u.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1},r.a.createElement(u.a,{item:!0,xs:8},r.a.createElement(m.a,{variant:"subtitle1",className:t.fieldTitle},"SQS (Simple Queue Service)")),r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(k.a,{component:q.a,type:"checkbox",name:"isSqsRequired",inputProps:{"aria-label":"security checkbox"}})),r.a.createElement(u.a,{item:!0,xs:12},r.a.createElement(N,{values:c,resourceName:"isSqsRequired",arrayName:"sqsArray",resourceAddLabel:"add queue"})),r.a.createElement(u.a,{item:!0,xs:12},i.isSqsRequired&&r.a.createElement(R.a,{className:t.helperText},i.isSqsRequired))),r.a.createElement(u.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2},r.a.createElement(u.a,{item:!0},r.a.createElement(d.a,{className:t.button,variant:"contained",size:"small",disabled:n,onClick:a,startIcon:r.a.createElement(w.a,null)},"Generate")))))})))}var G={fontFamily:["Metropolis","Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),letterSpacing:"0.015rem"},L=Object(b.a)({typography:{h1:Object(o.a)({},G),h2:Object(o.a)({},G),h3:Object(o.a)({},G),h4:Object(o.a)({},G),h5:Object(o.a)({},G),h6:Object(o.a)({},G),subtitle1:Object(o.a)({},G),button:Object(o.a)({},G)}}),F=Object(E.a)({subheading:{color:"#fd5750",fontWeight:"800"},button:{borderRadius:5,color:"#FFF",backgroundColor:"#fd5750","&:hover":{backgroundColor:"#FD8984"}},fieldTitle:{textAlign:"right",fontWeight:"600"},fieldTitle2:{fontWeight:"600"},header:{backgroundColor:"#282c34",color:"white",textAlign:"center"}});var B=function(){var e=F(),a=Object(n.useState)(null),t=Object(s.a)(a,2),c=t[0],i=t[1],o=function(){navigator.clipboard.writeText(JSON.stringify(c,null,2))};return r.a.createElement(p.a,{theme:L},r.a.createElement("div",null,r.a.createElement("header",{className:e.header},r.a.createElement(l.a,{p:2},r.a.createElement(m.a,{variant:"h4",component:"h1"},"Serverless Permission Policy Generator"))),r.a.createElement(u.a,{container:!0},r.a.createElement(u.a,{item:!0,md:4,xs:12},r.a.createElement(T,{setPolicy:i})),r.a.createElement(u.a,{item:!0,md:8,xs:12},r.a.createElement(l.a,{m:2},r.a.createElement(u.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2},r.a.createElement(u.a,{item:!0},r.a.createElement(m.a,{variant:"h6",component:"h2",className:e.subheading},"Generated Policy")),r.a.createElement(u.a,{item:!0},r.a.createElement(d.a,{className:e.button,variant:"contained",size:"small",startIcon:r.a.createElement(A.a,null),onClick:o},"Copy to Clipboard"))),c&&r.a.createElement(f.a,{src:c,name:!1}),r.a.createElement(l.a,{mt:2},c&&r.a.createElement(d.a,{className:e.button,variant:"contained",size:"small",startIcon:r.a.createElement(A.a,null),onClick:o},"Copy to Clipboard")))))))};t(92),t(93),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[80,1,2]]]);
//# sourceMappingURL=main.afccd5c7.chunk.js.map